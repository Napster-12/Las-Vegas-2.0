<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shopping Cart - LAS VEGAS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; background: #fff; color: #111; }

    /* Navbar */
    .navbar { background: #e0f0ff; box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
    .navbar .btn { border-radius: 50px; font-weight: 600; color: #fff; border: none; background-color:#4da6ff; transition: all 0.3s ease; }
    .navbar .btn:hover { background-color: #3399ff; transform: translateY(-3px); }
    .cart-count { position: absolute; top: -8px; right: -12px; background: #ff4d4d; color: #fff; font-size: 0.8rem; padding: 3px 7px; border-radius: 50%; font-weight: 700; box-shadow: 0 2px 6px rgba(0,0,0,0.3); }

    /* Page Header */
    .page-header { text-align: center; padding: 60px 20px; background: #f8f9fa; margin-bottom: 30px; border-bottom: 1px solid #eaeaea; }
    .page-header h1 { font-size: 2.5rem; margin-bottom: 10px; }
    .page-header p { font-size: 1.1rem; }

    .cart-item img { width: 80px; height: 80px; object-fit: contain; background: #f8f9fa; border-radius: 10px; padding: 5px; }
    .cart-item { border-bottom: 1px solid #eaeaea; padding: 15px 0; }
    .cart-item .btn { padding: 5px 12px; font-size: 0.9rem; }
    .cart-item select { width: 100px; padding: 5px; border-radius: 8px; border: 1px solid #ddd; background: #fff; font-size: 0.9rem; }

    .total-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px; }
    .btn-checkout { width: 100%; background: #28a745; color: #fff; font-weight: 700; border-radius: 50px; transition: 0.3s; padding: 12px; }
    .btn-checkout:hover { background: #218838; }

    footer { background: #f8f9fa; color: #111; padding: 30px 20px; text-align: center; border-top: 1px solid #eaeaea; margin-top: 50px; }

    @media (max-width: 768px) {
      .page-header h1 { font-size: 2rem; }
      .page-header p { font-size: 1rem; }
      .cart-item img { width: 60px; height: 60px; }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
      <a class="navbar-brand fw-bold text-primary" href="/">LAS VEGAS</a>
      <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navMenu">
        <ul class="navbar-nav align-items-center">
          <li class="nav-item"><a class="btn m-1" href="/">Home</a></li>
          <li class="nav-item"><a class="btn m-1" href="/menu">Shop Jerseys</a></li>
          <li class="nav-item"><a class="btn m-1" href="/customize">Customize Kit</a></li>
          <li class="nav-item position-relative">
          <a class="btn m-1" href="/cart">Cart <span class="cart-count" id="cart-count">0</span></a>
        </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <section class="page-header">
    <h1>Your Shopping Cart</h1>
    <p>Review your items, choose sizes, and proceed to checkout</p>
  </section>

  <!-- Cart Items -->
  <div class="container">
    <div id="cart-items" class="mb-4"></div>
    <div class="total-section">
      <h4 class="d-flex justify-content-between">
        <span>Total:</span>
        <span id="cart-total">R0</span>
      </h4>
      <button class="btn-checkout mt-3" onclick="checkout()">Proceed to Checkout</button>
    </div>
  </div>

  <footer>
    <p>&copy; 2024 LAS VEGAS. All Rights Reserved.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function updateCartDisplay() {
      const cartItemsContainer = document.getElementById('cart-items');
      const cartCount = document.getElementById('cart-count');
      cartItemsContainer.innerHTML = '';

      if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p class="text-center">Your cart is empty.</p>';
        document.getElementById('cart-total').textContent = 'R0';
        cartCount.textContent = '0';
        return;
      }

      let total = 0;
      cart.forEach((item, index) => {
        total += item.price * item.quantity;
        if (!item.size) item.size = 'M';

        const cartItem = document.createElement('div');
        cartItem.classList.add('cart-item', 'row', 'align-items-center');
        cartItem.innerHTML = `
          <div class="col-md-2 text-center">
            <img src="${item.img}" alt="${item.name}">
          </div>
          <div class="col-md-3">
            <h5>${item.name}</h5>
            <p class="text-muted">R${item.price}</p>
          </div>
          <div class="col-md-2">
            <select onchange="changeSize(${index}, this.value)">
              <option value="S" ${item.size==='S'?'selected':''}>S</option>
              <option value="M" ${item.size==='M'?'selected':''}>M</option>
              <option value="L" ${item.size==='L'?'selected':''}>L</option>
              <option value="XL" ${item.size==='XL'?'selected':''}>XL</option>
            </select>
          </div>
          <div class="col-md-2 d-flex align-items-center">
            <button class="btn btn-outline-secondary me-2" onclick="changeQuantity(${index}, -1)">-</button>
            <span>${item.quantity}</span>
            <button class="btn btn-outline-secondary ms-2" onclick="changeQuantity(${index}, 1)">+</button>
          </div>
          <div class="col-md-2 text-end">
            <p class="fw-bold">R${item.price * item.quantity}</p>
          </div>
          <div class="col-md-1 text-end">
            <button class="btn btn-danger btn-sm" onclick="removeItem(${index})">x</button>
          </div>
        `;
        cartItemsContainer.appendChild(cartItem);
      });

      document.getElementById('cart-total').textContent = 'R' + total;
      cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
    }

    function changeQuantity(index, delta) {
      if (cart[index].quantity + delta > 0) cart[index].quantity += delta;
      else cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartDisplay();
    }

    function changeSize(index, newSize) {
      cart[index].size = newSize;
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    function removeItem(index) {
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartDisplay();
    }

    // âœ… Redirect to checkout page
    function checkout() {
      if (cart.length === 0) {
        alert('Your cart is empty.');
        return;
      }
      window.location.href = "/checkout"; // Change path if needed
    }

    updateCartDisplay();
  </script>
</body>
</html>

