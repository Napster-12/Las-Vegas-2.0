<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Checkout - LAS VEGAS</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { font-family: 'Poppins', sans-serif; background: #fff; color: #111; }
.navbar { background: #e0f0ff; box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
.navbar .btn { border-radius: 50px; font-weight: 600; color: #fff; border: none; background-color:#4da6ff; transition: all 0.3s ease; }
.navbar .btn:hover { background-color: #3399ff; transform: translateY(-3px); }
.page-header { text-align: center; padding: 60px 20px; background: #f8f9fa; margin-bottom: 30px; border-bottom: 1px solid #eaeaea; }
.page-header h1 { font-size: 2.5rem; margin-bottom: 10px; }
.page-header p { font-size: 1.1rem; }
.checkout-section { background: #f8f9fa; padding: 30px; border-radius: 10px; max-width: 700px; margin: auto; }
.btn-place-order { width: 100%; background: #28a745; color: #fff; font-weight: 700; border-radius: 50px; transition: 0.3s; padding: 12px; }
.btn-place-order:hover { background: #218838; }
footer { background: #f8f9fa; color: #111; padding: 30px 20px; text-align: center; border-top: 1px solid #eaeaea; margin-top: 50px; }
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg sticky-top">
<div class="container">
  <a class="navbar-brand fw-bold text-primary" href="/">LAS VEGAS</a>
</div>
</nav>

<section class="page-header">
  <h1>Checkout</h1>
  <p>Confirm your order</p>
</section>

<div class="checkout-section">
  {% if success_msg %}<div class="alert alert-success">{{ success_msg }}</div>{% endif %}
  <h4>Client Information</h4>
  <form method="POST" action="/checkout">
    <div class="mb-3">
      <label>Name*</label>
      <input type="text" name="client_name" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>Email*</label>
      <input type="email" name="client_email" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>Phone</label>
      <input type="text" name="client_phone" class="form-control">
    </div>
    <div class="mb-3">
      <label>Address*</label>
      <textarea name="client_address" class="form-control" required></textarea>
    </div>

    <h4>Order Summary</h4>
    <div id="order-summary" class="mb-4"></div>

    <input type="hidden" name="cart_data" id="cart_data">
    <input type="hidden" name="total" id="total">

    <button type="submit" class="btn-place-order">Place Order</button>
  </form>
</div>

<footer>
<p>&copy; 2024 LAS VEGAS. All Rights Reserved.</p>
</footer>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];
const summary = document.getElementById('order-summary');
const cart_data = document.getElementById('cart_data');
const total_input = document.getElementById('total');

if(cart.length === 0){
  summary.innerHTML = "<p>Your cart is empty.</p>";
} else {
  let total = 0;
  let html = '<ul class="list-group">';
  cart.forEach(item=>{
    total += item.price*item.quantity;
    html += `<li class="list-group-item d-flex justify-content-between">${item.name} (Size: ${item.size||'M'}) Ã— ${item.quantity}<span>R${item.price*item.quantity}</span></li>`;
  });
  html += `</ul><h5 class="mt-3 text-end">Total: R${total}</h5>`;
  summary.innerHTML = html;
  cart_data.value = JSON.stringify(cart);
  total_input.value = total;
}
</script>
</body>
</html>
